---
title: 为什么需要node作为中间层
date: 2020-09-01 16:55:09
categories:
    - JavaScript
tags:
    - 面试题
---
通常我们把Web领域分为客户端和服务端，也就是前端和后端，这里的后端就包含了网关，静态资源，接口，缓存，数据库等。而中间层呢，就是在后端这里再抽离一层出来，在业务上处理和客户端衔接更紧密的部分，比如页面渲染（SSR），数据聚合，接口转发等等。
以SSR来说，在服务端将页面渲染好，可以加快用户的首屏加载速度，避免请求时白屏，还有利于网站做SEO，他的好处是比较好理解的。那么对于数据的聚合，接口转发来说，这样做有什么意义呢？
<!--more-->
- 用Node的原因有以下：
  - 代理：在开发环境下，我们可以利用代理来，解决最常见的跨域问题；在线上环境下，我们可以利用代理，转发请求到多个服务端
  - 缓存：缓存其实是更靠近前端的需求，用户的动作触发数据的更新，node中间层可以直接处理一部分缓存需求。
  - 限流：node中间层，可以针对接口或者路由做响应的限流。
  - 日志：相比其他服务端语言，node中间层的日志记录，能更方便快捷的定位问题（是在浏览器端还是服务端）。
  - 监控：擅长高并发的请求处理，做监控也是合适的选项。
  - 鉴权：有一个中间层去鉴权，也是一种单一职责的实现。
  - 路由：前端更需要掌握页面路由的权限和逻辑。
  - 服务端渲染：node中间层的解决方案更灵活，比如SSR、模板直出、利用一些JS库做预渲染等等。
  - 更多的可能性